{% extends 'base_template.html' %}
{% load static %}

{% block title %}<title>UG SEE QP Exam Details</title>{% endblock %}


{% block page-content %}
<!-- Date Range Picker CSS -->
<link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}" />
<script src="{% static 'plugins/daterangepicker/moment.min.js' %}"></script>
<script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>

<h2 align="center">UG SEE QP Exam Details</h2>
<section class="mt-5 mb-5">
    <div class="container shadow rounded-3 p-4 bg-white">
        <form action="/exam_qp" method="POST" id="">
            {% csrf_token %}
            {% if exam is None %}
                {% comment %} <div class="col-6 mb-3">
                    <label for="acad_cal_acad_year" class="form-label">
                        Academic Year
                    </label>
                    <select name="acad_cal_acad_year" id="acad_cal_acad_year" class="form-select" required>
                        {% if acad_cal_obj is None %}
                        <option value="" disabled selected>-- Choose Academic Year --</option>
                        {% for aca_yr in academic_year_tbl %}
                        <!-- <option value="{{aca_yr.acayear}}">{{aca_yr.acayear}}</option> -->
                        <option value="{{aca_yr.id}}">{{aca_yr.acayear}}</option> 
                        {% endfor %}
                        {% else %}
                        {% for aca_yr in academic_year_tbl %}
                        {% if aca_yr.acayear == acad_cal_obj.acad_cal_acad_year%}
                        <option value="{{aca_yr.id}}">{{aca_yr.acayear}}</option>
                        {% endif %}
                      {% endfor %}
                      {% for aca_yr in academic_year_tbl %}
                        {% if aca_yr.acayear != acad_cal_obj.acad_cal_acad_year%}
                        <option value="{{aca_yr.id}}">{{aca_yr.acayear}}</option>
                        {% endif %}
                      {% endfor%}
                      {% endif %}
                    </select>
                </div>
                <div class="col-6 mb-3">
                    <label for="acad_cal_sem" class="form-label"> Semester </label>
                    <select name="acad_cal_sem" id="acad_cal_sem" class="form-select" required>
                        {% if acad_cal_obj is None %}
                        <option disabled selected>Choose Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% else %}
                        {% if acad_cal_obj.acad_cal_sem == 1%}
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 2 %}
                        <option value="2">2nd Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 3 %}
                        <option value="3">3rd Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 4 %}
                        <option value="4">4th Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 5 %}
                        <option value="5">5th Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 6 %}
                        <option value="6">6th Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="7">7th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 7 %}
                        <option value="7">7th Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="8">8th Semester</option>
                        {% elif acad_cal_obj.acad_cal_sem == 8 %}
                        <option value="8">8th Semester</option>
                        <option value="1">1st Semester</option>
                        <option value="2">2nd Semester</option>
                        <option value="3">3rd Semester</option>
                        <option value="4">4th Semester</option>
                        <option value="5">5th Semester</option>
                        <option value="6">6th Semester</option>
                        <option value="7">7th Semester</option>
                        {% endif %}
                        {% endif %}
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-6 mb-3">
                    <label for="exam_type" class="form-label"> Exam Type </label>
                    <select name="exam_type" id="exam_type" class="form-select" required>
                        {% if acad_cal_obj is None %}
                        <option disabled selected>Choose Exam Type</option>
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=4>STC</option>
                        <option value=5>STC-MakeUP</option>
                        <option value=6>Special-Exam</option>
                        {% else %}
                        {% if acad_cal_obj.acad_cal_sem == 1%}
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=4>STC</option>
                        <option value=5>STC-MakeUP</option>
                        <option value=6>Special-Exam</option>
                        {% elif acad_cal_obj.acad_cal_sem == 2 %}
                        <option value=2>MakeUP</option>
                        <option value=1>Regular</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=4>STC</option>
                        <option value=5>STC-MakeUP</option>
                        <option value=6>Special-Exam</option>
                        {% elif acad_cal_obj.acad_cal_sem == 3 %}
                        <option value=3>Special-MakeUP</option>
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=4>STC</option>
                        <option value=5>STC-MakeUP</option>
                        <option value=6>Special-Exam</option>
                        {% elif acad_cal_obj.acad_cal_sem == 4 %}
                        <option value=4>STC</option>
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=5>STC-MakeUP</option>
                        <option value=6>Special-Exam</option>
                        {% elif acad_cal_obj.acad_cal_sem == 5 %}
                        <option value=5>STC-MakeUP</option>
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=4>STC</option>
                        <option value=6>Special-Exam</option>
                        {% elif acad_cal_obj.acad_cal_sem == 6 %}
                        <option value=6>Special-Exam</option>
                        <option value=1>Regular</option>
                        <option value=2>MakeUP</option>
                        <option value=3>Special-MakeUP</option>
                        <option value=4>STC</option>
                        <option value=5>STC-MakeUP</option>
                        {% endif %}
                        {% endif %}
                    </select> {% endcomment %}
            <div class="row">
                <div class="col-6 mb-3">
                    <label for="exam_id" class="form-label"> Exam </label>
                    <select name="exam_id" id="exam_id" class="form-select" required>
                        <option value="" disabled selected>Choose Exam</option>
                        {% for exam in exams %}
                        <option value="{{ exam.exam_details_id }}">{{ exam.description }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-6 mb-3">
                    <label for="department" class="form-label"> Department </label>
                    <select name="department" id="department" class="form-select" required>
                        <option value="" disabled selected>Choose Department</option>
                        {% for department in departments %}
                        <option value="{{ department.dept_id }}">{{ department.dept_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-12 mb-3 mt-3 text-center">
                    <button type="submit" name="btn_clicked" id="btn_clicked" value="get_exam_details"
                        class="btn btn-success btn-sm"><b>Get Exam Details</b></button>
                </div>
            </div>
            {% else %}
            <div class="card mt-4 ">
                <input type="text" name="exam_details_id" hidden value="{{exam.exam_details_id}}">
                <input type="text" name="department" hidden value="{{department}}">
                <h5 class="card-header text-center">Exam Details</h5>
                <div class="card-body">
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-lab" role="tabpanel"
                            aria-labelledby="pills-lab-tab">
                            <div class="row mt-2">
                                <div class="col-4 mb-3">
                                    <p class="form-control ">Academic Year : {{exam.acad_year}}</p>
                                </div>
                                <div class="col-4 mb-3">
                                    <p class="form-control ">Semester: {{exam.semester}}</p>
                                </div>
                                <div class="col-4 mb-3">
                                    <p class="form-control ">Exam Type : {{exam.exam_type}}</p>
                                </div>
                                <div class="col-12 mb-3">
                                    <p class="form-control ">Exam Description : {{exam.description}}</p>
                                </div>
                                <div class="col-6 mb-3">
                                    <p class="form-control ">Department: {{department.dept_name}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
            {% if exam %}
            {% comment %} <div class="card mt-4 ">
                <h5 class="card-header text-center">Add Course For Exam</h5>
                <div class="card-body">
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-lab" role="tabpanel"
                            aria-labelledby="pills-lab-tab">
                            <div class="row mt-2 text-center">
                                <div class="col-6 mb-3">
                                    <div class="text-center">
                                        <label class="form-label">Course : </label>
                                        <select name="course_name" id="course_name" class="form-select">
                                            <option value="" disabled selected>Choose Course</option>
                                            {% for course in course_obj %}
                                            <option value="{{course.course_code}}">
                                                {{course.course_title}} - {{course.course_code}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-12 mb-3 mt-3 text-center">
                                    <button type="submit" name="btn_clicked" id="btn_clicked" value="add_course"
                                        class="btn btn-success btn-sm"><b>Add Course For Exam</b></button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div> {% endcomment %}
            <div class="card mt-4">
                <h5 class="card-header text-center">Add Course For Exam</h5>
                <div class="card-body">
                    <div class="tab-content text-center" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-lab" role="tabpanel"
                            aria-labelledby="pills-lab-tab">
                            <div class="form-group row justify-content-center">
                                <label for="inputPassword" class="col-sm-2 col-form-label">Course : </label>
                                <div class="col-sm-5">
                                    <select name="course_name" id="course_name" class="form-select">
                                        <option value="" disabled selected>Choose Course</option>
                                        {% for course in course_obj %}
                                        <option value="{{course.course_code}}">
                                            {{course.course_title}} - {{course.course_code}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="row justify-content-center">
                                <div class="col-12 mb-4 mt-4 text-center">
                                    <button type="submit" name="btn_clicked" id="btn_clicked" value="add_course"
                                        class="btn btn-success btn-sm"><b>Add Course For Exam</b></button>
                                </div>
                            </div>
    
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mt-4 ">
                <h5 class="card-header text-center">Course List for the Exam</h5>
                <div class="card-body">
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-lab" role="tabpanel"
                            aria-labelledby="pills-lab-tab">
                            <div class="row mt-2 text-center">
                                <table id="StudentSearchData" class="table table-sm">
                                    <thead class="table-dark">
                                        <tr class="header">
                                            <th>Sl No.</th>
                                            <th>Course Title</th>
                                            <th>Course Code</th>
                                            <th>QP Pattern</th>
                                            {% comment %} <th>Assessment Pattern</th> {% endcomment %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for examDetails in examList %}
                                        <tr>
                                            <td>{{forloop.counter}}</td>
                                            <td>{{examDetails.course_code.course_title}}</td>
                                            <td>{{examDetails.course_code.course_code}}</td>
                                            <td>
                                                <div> {{assessment.questions.all.count }}
                                                    {% if  examDetails.exam_QP_pattern.all.count > 0 %}
                                                    {% comment %} examDetails.exam_qp_id {% endcomment %}
                                                        {% comment %} <button type="submit" name="btn_clicked" id="btn_scheme_allot" value="editAssessment" class="btn btn-info btn-sm">Edit</button> {% endcomment %}
                                                        <a href="{% url 'edit_exam_qp_pattern' examDetails.exam_qp_id %}" class="btn btn-info btn-sm">Edit</a>
                                                    {% else %}
                                                        <a href="{% url 'add_exam_qp_pattern'  examDetails.exam_qp_id %}" class="btn btn-info btn-sm">Add</a>
                                                        {% comment %} <button type="submit" name="btn_clicked" id="btn_scheme_allot" value="editAssessment" class="btn btn-info btn-sm">Edit</button> {% endcomment %}
                                                    {% endif %}

                                                </div>

                                            </td>
                                            {% comment %} <td>
                                                {% if assessment.questions.all.count > 0 %}
                                                <a href="{% url 'edit_assessment_pattern' assessment.declare_assessment_id %}"
                                                    class="btn btn-info btn-sm">Edit</a>
                                                {% else %}
                                                <a href="{% url 'add_assessment_pattern' assessment.declare_assessment_id %}"
                                                    class="btn btn-info btn-sm">Add</a>
                                                {% endif %}
                                            </td> {% endcomment %}

                                            {% comment %} <form action="/bitWiseMarks" method="post">
                                                {% csrf_token %}
                                                <input type="text" value="{{ course_name }}" name="course" hidden />
                                                <input type="text" value="{{ academic_year }}" name="acadYear" hidden />
                                                <input type="text" value="{{ sem }}" name="sem" hidden />
                                                <input type="text" name="btn_ass_id"
                                                    value="{{ assessment.declare_assessment_id }}" hidden>
                                                {% if forloop.counter == 1 %}
                                                <td rowspan="{{ assessments|length }}">
                                                    <div>
                                                        <button type="submit" name="" id="btn_scheme_allot"
                                                            value="addMarks" class="btn btn-primary btn-sm">Add
                                                            Marks</button>
                                                    </div>
                                                </td>
                                                {% endif %}
                                            </form> {% endcomment %}

                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            {% endif %}

            {% comment %} <div class="card mt-4">
                <h5 class="card-header">Lab</h5>
                <div class="card-body">
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-lab" role="tabpanel"
                            aria-labelledby="pills-lab-tab">
                            <div class="row mt-2">
                                <div class="col-6 mb-3">
                                    <label for="acad_cal_see_lab_from" class="form-label">Lab From Date </label>
                                    {% if acad_cal_obj is None %}
                                    <input type="text" id="acad_cal_see_lab_from" name="acad_cal_see_lab_from"
                                        class="form-control" date-picker="date" placeholder="Select From Date"
                                        required />
                                    {% else %}
                                    <input type="" id="acad_cal_see_lab_from" name="acad_cal_see_lab_from"
                                        value="{{ acad_cal_obj.acad_cal_see_lab_from | date:'Y-m-d'}}"
                                        class="form-control" date-picker="date" />
                                    {% endif %}
                                </div>
                                <div class="col-6 mb-3">
                                    <label for="acad_cal_see_lab_to" class="form-label">Lab To Date </label>
                                    {% if acad_cal_obj is None %}
                                    <input type="text" id="acad_cal_see_lab_to" name="acad_cal_see_lab_to"
                                        class="form-control" date-picker="date" placeholder="Select To Date" required />
                                    {% else %}
                                    <input type="" id="acad_cal_see_lab_to" name="acad_cal_see_lab_to"
                                        value="{{ acad_cal_obj.acad_cal_see_lab_to | date:'Y-m-d'}}"
                                        class="form-control" date-picker="date" />
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
    </div> {% endcomment %}
    <!-- <div class="row">
        <div class="d-grid gap-2 col-1 mx-auto">
          {% if acad_cal_obj is None %}
          <input type="text" name="btn_clicked" value="register" hidden>
          <button type="submit" name="btn_acad_cal" id="btn_acad_cal" value="register" class="btn btn-primary">Submit</button></div>
          <div class="d-grid gap-2 col-1 mx-auto">
          <button type="reset" name="btn_reset" id="btn_reset" value="reset" class="btn btn-primary" onclick="resetPage()">Reset</button></div>
          {% else %}
          <input type="text" name="acad_cal_id" value="{{ acad_cal_obj.acad_cal_id }}" hidden>
          <input type="text" name="btn_clicked" value="update" hidden>
          <button type="submit" name="btn_acad_cal" value="update" id="btn_acad_cal"
            class="btn btn-success btn-lg">Update</button>
          {% endif %}
        </div>
      </div> -->
    {% comment %} <div class="container my-3 bg-light">
        <div class="col-md-12 text-center">
            <input type="text" name="btn_clicked" value="register" hidden>
            <button type="submit" name="btn_acad_cal" id="btn_acad_cal" value="register"
                class="btn btn-primary">Submit</button>
            <button type="reset" name="btn_reset" id="btn_reset" value="reset" class="btn btn-primary"
                onclick="resetPage()">Reset</button>
        </div>
    </div> {% endcomment %}
    </form>
    </div>
</section>
{% comment %} <script>
    $(document).ready(function () {
        window.history.replaceState('', '', window.location.href)
    });
</script> {% endcomment %}
{% endblock %}